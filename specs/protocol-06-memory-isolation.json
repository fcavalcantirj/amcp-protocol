{
  "category": "amcp-protocol",
  "description": "Memory isolation guarantees between agents (parent/child)",
  "steps": [
    "CORE PRINCIPLE: Each agent's memories are cryptographically isolated",
    "AID = boundary. Different AID = different agent = different memories.",
    "Isolation enforced at two levels:",
    "  1. Header check: resuscitate validates header.aid === identity.aid",
    "  2. Encryption: payload encrypted with owner's private key",
    "Even with checkpoint file in hand, cannot read without private key.",
    "",
    "PARENT-CHILD RELATIONSHIP:",
    "  Parent spawning child does NOT share memories or keys.",
    "  Child gets fresh identity via protocol-00-identity-create.",
    "  Child's first checkpoint: previousCID = null, parentAID = parent's AID.",
    "  parentAID is metadata only - grants no access rights.",
    "",
    "CHAIN STRUCTURE (memory tree):",
    "  Agent A: [genesis] --> [ckpt-1] --> [ckpt-2] --> ...",
    "  Agent B: [genesis] --> [ckpt-1] --> ...",
    "  Each agent has INDEPENDENT chain, identified by AID.",
    "  previousCID links within SAME agent's chain only.",
    "  resurrectFromCID marks fork after resurrection.",
    "",
    "VERIFICATION (third party):",
    "  1. Read header (plaintext) - see AID, timestamp, previousCID",
    "  2. Verify signature with public key (derivable from AID)",
    "  3. Trace previousCID to follow chain",
    "  4. Cannot read payload contents without private key",
    "",
    "ANTI-PATTERNS PREVENTED:",
    "  ❌ Parent reading child's memories (AID mismatch + can't decrypt)",
    "  ❌ Child reading parent's memories (same)",
    "  ❌ Sibling reading sibling's memories (same)",
    "  ❌ Attacker injecting fake checkpoint (signature verification fails)",
    "  ❌ Forking without detection (previousCID reveals divergence)",
    "",
    "Verify: Parent cannot call resuscitate() on child's checkpoint",
    "Verify: Child cannot call resuscitate() on parent's checkpoint",
    "Verify: Third party can verify authenticity without decryption"
  ],
  "passes": false
}
